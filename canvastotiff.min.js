/*
	canvas-to-tiff version 1.5.0
	By Epistemex (c) 2015-2016
	www.epistemex.com
	MIT License (this header required)
*/
var CanvasToTIFF={_dly:9,_error:null,setErrorHandler:function(a){this._error=a},toArrayBuffer:function(e,c,C){C=C||{};var z=this;try{var L=e.width,s=e.height,A=0,v=258,m=0,B=[],u,J="\x63\x61\x6e\x76\x61\x73\x2d\x74\x6f\x2d\x74\x69\x66\x66\x20\x31\x2e\x30\0",y=!!C.littleEndian,j=+(C.dpiX||C.dpi||96)|0,k=+(C.dpiY||C.dpi||96)|0,t=e.getContext("2d").getImageData(0,0,L,s),E=0,g=new Date(),d=typeof pako!=="undefined"&&typeof pako.deflate!=="undefined",f=typeof C.compressionLevel==="number"?Math.max(0,Math.min(6,C.compressionLevel)):6,F,x,q,o,p,K,i;if(C.compress){if(d){F=pako.deflate(t.data,{level:f})}else{console.warn("Cannot compress. Need pako_deflate.js")}}x=F?F.length:t.data.length;q=v+x;o=new ArrayBuffer(q);p=new Uint8Array(o);K=new DataView(o);G(y?18761:19789);G(42);H(8);b();a(254,4,1,0);a(256,4,1,L);a(257,4,1,s);a(258,3,4,A,8);a(259,3,1,F?8:1);a(262,3,1,2);a(273,4,1,v,0);a(277,3,1,4);a(279,4,1,x);a(282,5,1,A,8);a(283,5,1,A,8);a(296,3,1,2);a(305,2,J.length,A,r(J));a(306,2,20,A,20);a(338,3,1,2);l();H(524296);H(524296);H(j);H(1);H(k);H(1);I(J);i=g.getFullYear()+":"+D(g.getMonth()+1)+":"+D(g.getDate())+" ";i+=D(g.getHours())+":"+D(g.getMinutes())+":"+D(g.getSeconds());I(i);p.set(F?F:t.data,v);setTimeout(function(){c(o)},z._dly)}catch(n){if(z._error){z._error(n.toString())}}function D(h){h+="";return h.length===1?"0"+h:h}function G(h){K.setUint16(E,h,y);E+=2}function H(h){K.setUint32(E,h,y);E+=4}function I(w){var h=0;while(h<w.length){K.setUint8(E++,w.charCodeAt(h++)&255,y)}if(E&1){E++}}function r(w){var h=w.length;return h&1?h+1:h}function a(M,N,h,O,w){G(M);G(N);H(h);if(w){A+=w;B.push(E)}if(h===1&&N===3&&!w){G(O);G(0)}else{H(O)}m++}function b(h){u=h||E;E+=2}function l(){K.setUint16(u,m,y);H(0);var h=14+m*12;for(var w=0,N,M;w<B.length;w++){N=B[w];M=K.getUint32(N,y);K.setUint32(N,M+h,y)}}},toBlob:function(b,a,c){this.toArrayBuffer(b,function(d){a(new Blob([d],{type:"image/tiff"}))},c||{})},toObjectURL:function(b,a,c){this.toBlob(b,function(d){var e=self.URL||self.webkitURL||self;a(e.createObjectURL(d))},c||{})},toDataURL:function(b,a,d){var c=this;c.toArrayBuffer(b,function(k){var j=new Uint8Array(k),g=1<<20,f=g,h="",e="",m=0,n=j.length;(function o(){while(m<n&&f-->0){h+=String.fromCharCode(j[m++])}if(m<n){f=g;setTimeout(o,c._dly)}else{m=0;n=h.length;f=180000;(function i(){e+=btoa(h.substr(m,f));m+=f;(m<n)?setTimeout(i,c._dly):a("data:image/tiff;base64,"+e)})()}})()},d||{})}};/* pako 1.0.1 nodeca/pako */
(function(a){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=a()}else{if(typeof define==="function"&&define.amd){define([],a)}else{var b;if(typeof window!=="undefined"){b=window}else{if(typeof global!=="undefined"){b=global}else{if(typeof self!=="undefined"){b=self}else{b=this}}}b.pako=a()}}})(function(){var a,d,c;return(function b(k,f,h){function j(p,q){if(!f[p]){if(!k[p]){var i=typeof require=="function"&&require;if(!q&&i){return i(p,!0)}if(e){return e(p,!0)}var m=new Error("Cannot find module '"+p+"'");throw m.code="MODULE_NOT_FOUND",m}var n=f[p]={exports:{}};k[p][0].call(n.exports,function(l){var o=k[p][1][l];return j(o?o:l)},n,n.exports,b,k,f,h)}return f[p].exports}var e=typeof require=="function"&&require;for(var g=0;g<h.length;g++){j(h[g])}return j})({1:[function(i,h,e){var j=(typeof Uint8Array!=="undefined")&&(typeof Uint16Array!=="undefined")&&(typeof Int32Array!=="undefined");e.assign=function(k){var n=Array.prototype.slice.call(arguments,1);while(n.length){var m=n.shift();if(!m){continue}if(typeof m!=="object"){throw new TypeError(m+"must be non-object")}for(var l in m){if(m.hasOwnProperty(l)){k[l]=m[l]}}}return k};e.shrinkBuf=function(k,l){if(k.length===l){return k}if(k.subarray){return k.subarray(0,l)}k.length=l;return k};var f={arraySet:function(k,o,p,n,l){if(o.subarray&&k.subarray){k.set(o.subarray(p,p+n),l);return}for(var m=0;m<n;m++){k[l+m]=o[p+m]}},flattenChunks:function(m){var n,o,p,q,k,r;p=0;for(n=0,o=m.length;n<o;n++){p+=m[n].length}r=new Uint8Array(p);q=0;for(n=0,o=m.length;n<o;n++){k=m[n];r.set(k,q);q+=k.length}return r}};var g={arraySet:function(k,o,p,n,l){for(var m=0;m<n;m++){k[l+m]=o[p+m]}},flattenChunks:function(k){return[].concat.apply([],k)}};e.setTyped=function(k){if(k){e.Buf8=Uint8Array;e.Buf16=Uint16Array;e.Buf32=Int32Array;e.assign(e,f)}else{e.Buf8=Array;e.Buf16=Array;e.Buf32=Array;e.assign(e,g)}};e.setTyped(j)},{}],2:[function(k,i,h){var n=k("./common");var l=!0;var m=!0;try{String.fromCharCode.apply(null,[0])}catch(e){l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){m=!1}var f=new n.Buf8(256);for(var j=0;j<256;j++){f[j]=(j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1)}f[254]=f[254]=1;h.string2buf=function(u){var o,q,r,t,s,v=u.length,p=0;for(t=0;t<v;t++){q=u.charCodeAt(t);if((q&64512)===55296&&(t+1<v)){r=u.charCodeAt(t+1);if((r&64512)===56320){q=65536+((q-55296)<<10)+(r-56320);t++}}p+=q<128?1:q<2048?2:q<65536?3:4}o=new n.Buf8(p);for(s=0,t=0;s<p;t++){q=u.charCodeAt(t);if((q&64512)===55296&&(t+1<v)){r=u.charCodeAt(t+1);if((r&64512)===56320){q=65536+((q-55296)<<10)+(r-56320);t++}}if(q<128){o[s++]=q}else{if(q<2048){o[s++]=192|(q>>>6);o[s++]=128|(q&63)}else{if(q<65536){o[s++]=224|(q>>>12);o[s++]=128|(q>>>6&63);o[s++]=128|(q&63)}else{o[s++]=240|(q>>>18);o[s++]=128|(q>>>12&63);o[s++]=128|(q>>>6&63);o[s++]=128|(q&63)}}}}return o};function g(o,q){if(q<65537){if((o.subarray&&m)||(!o.subarray&&l)){return String.fromCharCode.apply(null,n.shrinkBuf(o,q))}}var r="";for(var p=0;p<q;p++){r+=String.fromCharCode(o[p])}return r}h.buf2binstring=function(o){return g(o,o.length)};h.binstring2buf=function(r){var o=new n.Buf8(r.length);for(var p=0,q=o.length;p<q;p++){o[p]=r.charCodeAt(p)}return o};h.buf2string=function(o,t){var r,u,p,q;var s=t||o.length;var v=new Array(s*2);for(u=0,r=0;r<s;){p=o[r++];if(p<128){v[u++]=p;continue}q=f[p];if(q>4){v[u++]=65533;r+=q-1;continue}p&=q===2?31:q===3?15:7;while(q>1&&r<s){p=(p<<6)|(o[r++]&63);q--}if(q>1){v[u++]=65533;continue}if(p<65536){v[u++]=p}else{p-=65536;v[u++]=55296|((p>>10)&1023);v[u++]=56320|(p&1023)}}return g(v,u)};h.utf8border=function(o,p){var q;p=p||o.length;if(p>o.length){p=o.length}q=p-1;while(q>=0&&(o[q]&192)===128){q--}if(q<0){return p}if(q===0){return p}return(q+f[o[q]]>p)?q:p}},{"./common":1}],3:[function(h,g,f){function e(i,j,k,m){var o=(i&65535)|0,p=((i>>>16)&65535)|0,l=0;while(k!==0){l=k>2000?2000:k;k-=l;do{o=(o+j[m++])|0;p=(p+o)|0}while(--l);o%=65521;p%=65521}return(o|(p<<16))|0}g.exports=e},{}],4:[function(j,i,g){function h(){var l,p=[];for(var o=0;o<256;o++){l=o;for(var m=0;m<8;m++){l=((l&1)?(3988292384^(l>>>1)):(l>>>1))}p[o]=l}return p}var f=h();function e(l,k,o,p){var q=f,m=p+o;l^=-1;for(var n=p;n<m;n++){l=(l>>>8)^q[(l^k[n])&255]}return(l^(-1))}i.exports=e},{}],5:[function(ai,Z,G){var al=ai("../utils/common");var ak=ai("./trees");var e=ai("./adler32");var o=ai("./crc32");var aa=ai("./messages");var ay=0;var aA=1;var aw=3;var au=4;var am=5;var az=0;var aC=1;var aD=-2;var ao=-3;var an=-5;var ap=-1;var at=1;var ax=2;var aB=3;var av=4;var aq=0;var aE=2;var ar=8;var V=9;var W=15;var q=8;var Q=29;var R=256;var P=R+1+Q;var p=30;var f=19;var N=2*P+1;var T=15;var Y=3;var U=258;var X=(U+Y+1);var ad=32;var O=42;var H=69;var ab=73;var l=91;var M=103;var k=113;var J=666;var j=1;var g=2;var i=3;var h=4;var ac=3;function F(aH,aG){aH.msg=aa[aG];return aG}function ag(aG){return((aG)<<1)-((aG)>4?9:0)}function aF(aG){var aH=aG.length;while(--aH>=0){aG[aH]=0}}function L(aI){var aH=aI.state;var aG=aH.pending;if(aG>aI.avail_out){aG=aI.avail_out}if(aG===0){return}al.arraySet(aI.output,aH.pending_buf,aH.pending_out,aG,aI.next_out);aI.next_out+=aG;aH.pending_out+=aG;aI.total_out+=aG;aI.avail_out-=aG;aH.pending-=aG;if(aH.pending===0){aH.pending_out=0}}function K(aH,aG){ak._tr_flush_block(aH,(aH.block_start>=0?aH.block_start:-1),aH.strstart-aH.block_start,aG);aH.block_start=aH.strstart;L(aH.strm)}function ae(aH,aG){aH.pending_buf[aH.pending++]=aG}function af(aH,aG){aH.pending_buf[aH.pending++]=(aG>>>8)&255;aH.pending_buf[aH.pending++]=aG&255}function ah(aK,aG,aJ,aI){var aH=aK.avail_in;if(aH>aI){aH=aI}if(aH===0){return 0}aK.avail_in-=aH;al.arraySet(aG,aK.input,aK.next_in,aH,aJ);if(aK.state.wrap===1){aK.adler=e(aK.adler,aG,aH,aJ)}else{if(aK.state.wrap===2){aK.adler=o(aK.adler,aG,aH,aJ)}}aK.next_in+=aH;aK.total_in+=aH;return aH}function aj(aP,aJ){var aI=aP.max_chain_length;var aQ=aP.strstart;var aM;var aK;var aH=aP.prev_length;var aN=aP.nice_match;var aL=(aP.strstart>(aP.w_size-X))?aP.strstart-(aP.w_size-X):0;var aG=aP.window;var aU=aP.w_mask;var aO=aP.prev;var aT=aP.strstart+U;var aS=aG[aQ+aH-1];var aR=aG[aQ+aH];if(aP.prev_length>=aP.good_match){aI>>=2}if(aN>aP.lookahead){aN=aP.lookahead}do{aM=aJ;if(aG[aM+aH]!==aR||aG[aM+aH-1]!==aS||aG[aM]!==aG[aQ]||aG[++aM]!==aG[aQ+1]){continue}aQ+=2;aM++;do{}while(aG[++aQ]===aG[++aM]&&aG[++aQ]===aG[++aM]&&aG[++aQ]===aG[++aM]&&aG[++aQ]===aG[++aM]&&aG[++aQ]===aG[++aM]&&aG[++aQ]===aG[++aM]&&aG[++aQ]===aG[++aM]&&aG[++aQ]===aG[++aM]&&aQ<aT);aK=U-(aT-aQ);aQ=aT-U;if(aK>aH){aP.match_start=aJ;aH=aK;if(aK>=aN){break}aS=aG[aQ+aH-1];aR=aG[aQ+aH]}}while((aJ=aO[aJ&aU])>aL&&--aI!==0);if(aH<=aP.lookahead){return aH}return aP.lookahead}function I(aL){var aG=aL.w_size;var aK,aJ,aH,aI,aM;do{aI=aL.window_size-aL.lookahead-aL.strstart;if(aL.strstart>=aG+(aG-X)){al.arraySet(aL.window,aL.window,aG,aG,0);aL.match_start-=aG;aL.strstart-=aG;aL.block_start-=aG;aJ=aL.hash_size;aK=aJ;do{aH=aL.head[--aK];aL.head[aK]=(aH>=aG?aH-aG:0)}while(--aJ);aJ=aG;aK=aJ;do{aH=aL.prev[--aK];aL.prev[aK]=(aH>=aG?aH-aG:0)}while(--aJ);aI+=aG}if(aL.strm.avail_in===0){break}aJ=ah(aL.strm,aL.window,aL.strstart+aL.lookahead,aI);aL.lookahead+=aJ;if(aL.lookahead+aL.insert>=Y){aM=aL.strstart-aL.insert;aL.ins_h=aL.window[aM];aL.ins_h=((aL.ins_h<<aL.hash_shift)^aL.window[aM+1])&aL.hash_mask;while(aL.insert){aL.ins_h=((aL.ins_h<<aL.hash_shift)^aL.window[aM+Y-1])&aL.hash_mask;aL.prev[aM&aL.w_mask]=aL.head[aL.ins_h];aL.head[aL.ins_h]=aM;aM++;aL.insert--;if(aL.lookahead+aL.insert<Y){break}}}}while(aL.lookahead<X&&aL.strm.avail_in!==0)}function w(aJ,aG){var aH=65535;if(aH>aJ.pending_buf_size-5){aH=aJ.pending_buf_size-5}for(;;){if(aJ.lookahead<=1){I(aJ);if(aJ.lookahead===0&&aG===ay){return j}if(aJ.lookahead===0){break}}aJ.strstart+=aJ.lookahead;aJ.lookahead=0;var aI=aJ.block_start+aH;if(aJ.strstart===0||aJ.strstart>=aI){aJ.lookahead=aJ.strstart-aI;aJ.strstart=aI;K(aJ,!1);if(aJ.strm.avail_out===0){return j}}if(aJ.strstart-aJ.block_start>=(aJ.w_size-X)){K(aJ,!1);if(aJ.strm.avail_out===0){return j}}}aJ.insert=0;if(aG===au){K(aJ,!0);if(aJ.strm.avail_out===0){return i}return h}if(aJ.strstart>aJ.block_start){K(aJ,!1);if(aJ.strm.avail_out===0){return j}}return j}function s(aJ,aH){var aI;var aG;for(;;){if(aJ.lookahead<X){I(aJ);if(aJ.lookahead<X&&aH===ay){return j}if(aJ.lookahead===0){break}}aI=0;if(aJ.lookahead>=Y){aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aJ.strstart+Y-1])&aJ.hash_mask;aI=aJ.prev[aJ.strstart&aJ.w_mask]=aJ.head[aJ.ins_h];aJ.head[aJ.ins_h]=aJ.strstart}if(aI!==0&&((aJ.strstart-aI)<=(aJ.w_size-X))){aJ.match_length=aj(aJ,aI)}if(aJ.match_length>=Y){aG=ak._tr_tally(aJ,aJ.strstart-aJ.match_start,aJ.match_length-Y);aJ.lookahead-=aJ.match_length;if(aJ.match_length<=aJ.max_lazy_match&&aJ.lookahead>=Y){aJ.match_length--;do{aJ.strstart++;aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aJ.strstart+Y-1])&aJ.hash_mask;aI=aJ.prev[aJ.strstart&aJ.w_mask]=aJ.head[aJ.ins_h];aJ.head[aJ.ins_h]=aJ.strstart}while(--aJ.match_length!==0);aJ.strstart++}else{aJ.strstart+=aJ.match_length;aJ.match_length=0;aJ.ins_h=aJ.window[aJ.strstart];aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aJ.strstart+1])&aJ.hash_mask}}else{aG=ak._tr_tally(aJ,0,aJ.window[aJ.strstart]);aJ.lookahead--;aJ.strstart++}if(aG){K(aJ,!1);if(aJ.strm.avail_out===0){return j}}}aJ.insert=((aJ.strstart<(Y-1))?aJ.strstart:Y-1);if(aH===au){K(aJ,!0);if(aJ.strm.avail_out===0){return i}return h}if(aJ.last_lit){K(aJ,!1);if(aJ.strm.avail_out===0){return j}}return g}function v(aK,aH){var aI;var aG;var aJ;for(;;){if(aK.lookahead<X){I(aK);if(aK.lookahead<X&&aH===ay){return j}if(aK.lookahead===0){break}}aI=0;if(aK.lookahead>=Y){aK.ins_h=((aK.ins_h<<aK.hash_shift)^aK.window[aK.strstart+Y-1])&aK.hash_mask;aI=aK.prev[aK.strstart&aK.w_mask]=aK.head[aK.ins_h];aK.head[aK.ins_h]=aK.strstart}aK.prev_length=aK.match_length;aK.prev_match=aK.match_start;aK.match_length=Y-1;if(aI!==0&&aK.prev_length<aK.max_lazy_match&&aK.strstart-aI<=(aK.w_size-X)){aK.match_length=aj(aK,aI);if(aK.match_length<=5&&(aK.strategy===at||(aK.match_length===Y&&aK.strstart-aK.match_start>4096))){aK.match_length=Y-1}}if(aK.prev_length>=Y&&aK.match_length<=aK.prev_length){aJ=aK.strstart+aK.lookahead-Y;aG=ak._tr_tally(aK,aK.strstart-1-aK.prev_match,aK.prev_length-Y);aK.lookahead-=aK.prev_length-1;aK.prev_length-=2;do{if(++aK.strstart<=aJ){aK.ins_h=((aK.ins_h<<aK.hash_shift)^aK.window[aK.strstart+Y-1])&aK.hash_mask;aI=aK.prev[aK.strstart&aK.w_mask]=aK.head[aK.ins_h];aK.head[aK.ins_h]=aK.strstart}}while(--aK.prev_length!==0);aK.match_available=0;aK.match_length=Y-1;aK.strstart++;if(aG){K(aK,!1);if(aK.strm.avail_out===0){return j}}}else{if(aK.match_available){aG=ak._tr_tally(aK,0,aK.window[aK.strstart-1]);if(aG){K(aK,!1)}aK.strstart++;aK.lookahead--;if(aK.strm.avail_out===0){return j}}else{aK.match_available=1;aK.strstart++;aK.lookahead--}}}if(aK.match_available){aG=ak._tr_tally(aK,0,aK.window[aK.strstart-1]);aK.match_available=0}aK.insert=aK.strstart<Y-1?aK.strstart:Y-1;if(aH===au){K(aK,!0);if(aK.strm.avail_out===0){return i}return h}if(aK.last_lit){K(aK,!1);if(aK.strm.avail_out===0){return j}}return g}function u(aK,aI){var aH;var aJ;var aL,aM;var aG=aK.window;for(;;){if(aK.lookahead<=U){I(aK);if(aK.lookahead<=U&&aI===ay){return j}if(aK.lookahead===0){break}}aK.match_length=0;if(aK.lookahead>=Y&&aK.strstart>0){aL=aK.strstart-1;aJ=aG[aL];if(aJ===aG[++aL]&&aJ===aG[++aL]&&aJ===aG[++aL]){aM=aK.strstart+U;do{}while(aJ===aG[++aL]&&aJ===aG[++aL]&&aJ===aG[++aL]&&aJ===aG[++aL]&&aJ===aG[++aL]&&aJ===aG[++aL]&&aJ===aG[++aL]&&aJ===aG[++aL]&&aL<aM);aK.match_length=U-(aM-aL);if(aK.match_length>aK.lookahead){aK.match_length=aK.lookahead}}}if(aK.match_length>=Y){aH=ak._tr_tally(aK,1,aK.match_length-Y);aK.lookahead-=aK.match_length;aK.strstart+=aK.match_length;aK.match_length=0}else{aH=ak._tr_tally(aK,0,aK.window[aK.strstart]);aK.lookahead--;aK.strstart++}if(aH){K(aK,!1);if(aK.strm.avail_out===0){return j}}}aK.insert=0;if(aI===au){K(aK,!0);if(aK.strm.avail_out===0){return i}return h}if(aK.last_lit){K(aK,!1);if(aK.strm.avail_out===0){return j}}return g}function t(aI,aH){var aG;for(;;){if(aI.lookahead===0){I(aI);if(aI.lookahead===0){if(aH===ay){return j}break}}aI.match_length=0;aG=ak._tr_tally(aI,0,aI.window[aI.strstart]);aI.lookahead--;aI.strstart++;if(aG){K(aI,!1);if(aI.strm.avail_out===0){return j}}}aI.insert=0;if(aH===au){K(aI,!0);if(aI.strm.avail_out===0){return i}return h}if(aI.last_lit){K(aI,!1);if(aI.strm.avail_out===0){return j}}return g}function m(aH,aJ,aK,aI,aG){this.good_length=aH;this.max_lazy=aJ;this.nice_length=aK;this.max_chain=aI;this.func=aG}var n;n=[new m(0,0,0,0,w),new m(4,4,8,4,s),new m(4,5,16,8,s),new m(4,6,32,32,s),new m(4,4,16,16,v),new m(8,16,32,32,v),new m(8,16,128,128,v),new m(8,32,128,256,v),new m(32,128,258,1024,v),new m(32,258,258,4096,v)];function S(aG){aG.window_size=2*aG.w_size;aF(aG.head);aG.max_lazy_match=n[aG.level].max_lazy;aG.good_match=n[aG.level].good_length;aG.nice_match=n[aG.level].nice_length;aG.max_chain_length=n[aG.level].max_chain;aG.strstart=0;aG.block_start=0;aG.lookahead=0;aG.insert=0;aG.match_length=aG.prev_length=Y-1;aG.match_available=0;aG.ins_h=0}function E(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=ar;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new al.Buf16(N*2);this.dyn_dtree=new al.Buf16((2*p+1)*2);this.bl_tree=new al.Buf16((2*f+1)*2);aF(this.dyn_ltree);aF(this.dyn_dtree);aF(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new al.Buf16(T+1);this.heap=new al.Buf16(2*P+1);aF(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new al.Buf16(2*P+1);aF(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function B(aH){var aG;if(!aH||!aH.state){return F(aH,aD)}aH.total_in=aH.total_out=0;aH.data_type=aE;aG=aH.state;aG.pending=0;aG.pending_out=0;if(aG.wrap<0){aG.wrap=-aG.wrap}aG.status=(aG.wrap?O:k);aH.adler=(aG.wrap===2)?0:1;aG.last_flush=ay;ak._tr_init(aG);return az}function A(aH){var aG=B(aH);if(aG===az){S(aH.state)}return aG}function D(aH,aG){if(!aH||!aH.state){return aD}if(aH.state.wrap!==2){return aD}aH.state.gzhead=aG;return az}function z(aL,aG,aI,aM,aH,aK){if(!aL){return aD}var aN=1;if(aG===ap){aG=6}if(aM<0){aN=0;aM=-aM}else{if(aM>15){aN=2;aM-=16}}if(aH<1||aH>V||aI!==ar||aM<8||aM>15||aG<0||aG>9||aK<0||aK>av){return F(aL,aD)}if(aM===8){aM=9}var aJ=new E();aL.state=aJ;aJ.strm=aL;aJ.wrap=aN;aJ.gzhead=null;aJ.w_bits=aM;aJ.w_size=1<<aJ.w_bits;aJ.w_mask=aJ.w_size-1;aJ.hash_bits=aH+7;aJ.hash_size=1<<aJ.hash_bits;aJ.hash_mask=aJ.hash_size-1;aJ.hash_shift=~~((aJ.hash_bits+Y-1)/Y);aJ.window=new al.Buf8(aJ.w_size*2);aJ.head=new al.Buf16(aJ.hash_size);aJ.prev=new al.Buf16(aJ.w_size);aJ.lit_bufsize=1<<(aH+6);aJ.pending_buf_size=aJ.lit_bufsize*4;aJ.pending_buf=new al.Buf8(aJ.pending_buf_size);aJ.d_buf=aJ.lit_bufsize>>1;aJ.l_buf=(1+2)*aJ.lit_bufsize;aJ.level=aG;aJ.strategy=aK;aJ.method=aI;return A(aL)}function y(aH,aG){return z(aH,aG,ar,W,q,aq)}function r(aN,aI){var aL,aM;var aG,aO;if(!aN||!aN.state||aI>am||aI<0){return aN?F(aN,aD):aD}aM=aN.state;if(!aN.output||(!aN.input&&aN.avail_in!==0)||(aM.status===J&&aI!==au)){return F(aN,(aN.avail_out===0)?an:aD)}aM.strm=aN;aL=aM.last_flush;aM.last_flush=aI;if(aM.status===O){if(aM.wrap===2){aN.adler=0;ae(aM,31);ae(aM,139);ae(aM,8);if(!aM.gzhead){ae(aM,0);ae(aM,0);ae(aM,0);ae(aM,0);ae(aM,0);ae(aM,aM.level===9?2:(aM.strategy>=ax||aM.level<2?4:0));ae(aM,ac);aM.status=k}else{ae(aM,(aM.gzhead.text?1:0)+(aM.gzhead.hcrc?2:0)+(!aM.gzhead.extra?0:4)+(!aM.gzhead.name?0:8)+(!aM.gzhead.comment?0:16));ae(aM,aM.gzhead.time&255);ae(aM,(aM.gzhead.time>>8)&255);ae(aM,(aM.gzhead.time>>16)&255);ae(aM,(aM.gzhead.time>>24)&255);ae(aM,aM.level===9?2:(aM.strategy>=ax||aM.level<2?4:0));ae(aM,aM.gzhead.os&255);if(aM.gzhead.extra&&aM.gzhead.extra.length){ae(aM,aM.gzhead.extra.length&255);ae(aM,(aM.gzhead.extra.length>>8)&255)}if(aM.gzhead.hcrc){aN.adler=o(aN.adler,aM.pending_buf,aM.pending,0)}aM.gzindex=0;aM.status=H}}else{var aJ=(ar+((aM.w_bits-8)<<4))<<8;var aK=-1;if(aM.strategy>=ax||aM.level<2){aK=0}else{if(aM.level<6){aK=1}else{if(aM.level===6){aK=2}else{aK=3}}}aJ|=(aK<<6);if(aM.strstart!==0){aJ|=ad}aJ+=31-(aJ%31);aM.status=k;af(aM,aJ);if(aM.strstart!==0){af(aM,aN.adler>>>16);af(aM,aN.adler&65535)}aN.adler=1}}if(aM.status===H){if(aM.gzhead.extra){aG=aM.pending;while(aM.gzindex<(aM.gzhead.extra.length&65535)){if(aM.pending===aM.pending_buf_size){if(aM.gzhead.hcrc&&aM.pending>aG){aN.adler=o(aN.adler,aM.pending_buf,aM.pending-aG,aG)}L(aN);aG=aM.pending;if(aM.pending===aM.pending_buf_size){break}}ae(aM,aM.gzhead.extra[aM.gzindex]&255);aM.gzindex++}if(aM.gzhead.hcrc&&aM.pending>aG){aN.adler=o(aN.adler,aM.pending_buf,aM.pending-aG,aG)}if(aM.gzindex===aM.gzhead.extra.length){aM.gzindex=0;aM.status=ab}}else{aM.status=ab}}if(aM.status===ab){if(aM.gzhead.name){aG=aM.pending;do{if(aM.pending===aM.pending_buf_size){if(aM.gzhead.hcrc&&aM.pending>aG){aN.adler=o(aN.adler,aM.pending_buf,aM.pending-aG,aG)}L(aN);aG=aM.pending;if(aM.pending===aM.pending_buf_size){aO=1;break}}if(aM.gzindex<aM.gzhead.name.length){aO=aM.gzhead.name.charCodeAt(aM.gzindex++)&255}else{aO=0}ae(aM,aO)}while(aO!==0);if(aM.gzhead.hcrc&&aM.pending>aG){aN.adler=o(aN.adler,aM.pending_buf,aM.pending-aG,aG)}if(aO===0){aM.gzindex=0;aM.status=l}}else{aM.status=l}}if(aM.status===l){if(aM.gzhead.comment){aG=aM.pending;do{if(aM.pending===aM.pending_buf_size){if(aM.gzhead.hcrc&&aM.pending>aG){aN.adler=o(aN.adler,aM.pending_buf,aM.pending-aG,aG)}L(aN);aG=aM.pending;if(aM.pending===aM.pending_buf_size){aO=1;break}}if(aM.gzindex<aM.gzhead.comment.length){aO=aM.gzhead.comment.charCodeAt(aM.gzindex++)&255}else{aO=0}ae(aM,aO)}while(aO!==0);if(aM.gzhead.hcrc&&aM.pending>aG){aN.adler=o(aN.adler,aM.pending_buf,aM.pending-aG,aG)}if(aO===0){aM.status=M}}else{aM.status=M}}if(aM.status===M){if(aM.gzhead.hcrc){if(aM.pending+2>aM.pending_buf_size){L(aN)}if(aM.pending+2<=aM.pending_buf_size){ae(aM,aN.adler&255);ae(aM,(aN.adler>>8)&255);aN.adler=0;aM.status=k}}else{aM.status=k}}if(aM.pending!==0){L(aN);if(aN.avail_out===0){aM.last_flush=-1;return az}}else{if(aN.avail_in===0&&ag(aI)<=ag(aL)&&aI!==au){return F(aN,an)}}if(aM.status===J&&aN.avail_in!==0){return F(aN,an)}if(aN.avail_in!==0||aM.lookahead!==0||(aI!==ay&&aM.status!==J)){var aH=(aM.strategy===ax)?t(aM,aI):(aM.strategy===aB?u(aM,aI):n[aM.level].func(aM,aI));if(aH===i||aH===h){aM.status=J}if(aH===j||aH===i){if(aN.avail_out===0){aM.last_flush=-1}return az}if(aH===g){if(aI===aA){ak._tr_align(aM)}else{if(aI!==am){ak._tr_stored_block(aM,0,0,!1);if(aI===aw){aF(aM.head);if(aM.lookahead===0){aM.strstart=0;aM.block_start=0;aM.insert=0}}}}L(aN);if(aN.avail_out===0){aM.last_flush=-1;return az}}}if(aI!==au){return az}if(aM.wrap<=0){return aC}if(aM.wrap===2){ae(aM,aN.adler&255);ae(aM,(aN.adler>>8)&255);ae(aM,(aN.adler>>16)&255);ae(aM,(aN.adler>>24)&255);ae(aM,aN.total_in&255);ae(aM,(aN.total_in>>8)&255);ae(aM,(aN.total_in>>16)&255);ae(aM,(aN.total_in>>24)&255)}else{af(aM,aN.adler>>>16);af(aM,aN.adler&65535)}L(aN);if(aM.wrap>0){aM.wrap=-aM.wrap}return aM.pending!==0?az:aC}function x(aH){var aG;if(!aH||!aH.state){return aD}aG=aH.state.status;if(aG!==O&&aG!==H&&aG!==ab&&aG!==l&&aG!==M&&aG!==k&&aG!==J){return F(aH,aD)}aH.state=null;return aG===k?F(aH,ao):az}function C(aO,aH){var aI=aH.length;var aM;var aN,aK;var aQ;var aG;var aL;var aJ;var aP;if(!aO||!aO.state){return aD}aM=aO.state;aQ=aM.wrap;if(aQ===2||(aQ===1&&aM.status!==O)||aM.lookahead){return aD}if(aQ===1){aO.adler=e(aO.adler,aH,aI,0)}aM.wrap=0;if(aI>=aM.w_size){if(aQ===0){aF(aM.head);aM.strstart=0;aM.block_start=0;aM.insert=0}aP=new al.Buf8(aM.w_size);al.arraySet(aP,aH,aI-aM.w_size,aM.w_size,0);aH=aP;aI=aM.w_size}aG=aO.avail_in;aL=aO.next_in;aJ=aO.input;aO.avail_in=aI;aO.next_in=0;aO.input=aH;I(aM);while(aM.lookahead>=Y){aN=aM.strstart;aK=aM.lookahead-(Y-1);do{aM.ins_h=((aM.ins_h<<aM.hash_shift)^aM.window[aN+Y-1])&aM.hash_mask;aM.prev[aN&aM.w_mask]=aM.head[aM.ins_h];aM.head[aM.ins_h]=aN;aN++}while(--aK);aM.strstart=aN;aM.lookahead=Y-1;I(aM)}aM.strstart+=aM.lookahead;aM.block_start=aM.strstart;aM.insert=aM.lookahead;aM.lookahead=0;aM.match_length=aM.prev_length=Y-1;aM.match_available=0;aO.next_in=aL;aO.input=aJ;aO.avail_in=aG;aM.wrap=aQ;return az}G.deflateInit=y;G.deflateInit2=z;G.deflateReset=A;G.deflateResetKeep=B;G.deflateSetHeader=D;G.deflate=r;G.deflateEnd=x;G.deflateSetDictionary=C;G.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(g,f,e){f.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(Y,S,D){var aq=Y("../utils/common");var at=4;var ar=0;var au=1;var av=2;function aw(ax){var ay=ax.length;while(--ay>=0){ax[ay]=0}}var an=0;var al=1;var B=2;var R=3;var Q=258;var M=29;var N=256;var L=N+1+M;var y=30;var q=19;var J=2*L+1;var O=15;var s=16;var P=7;var C=256;var V=16;var X=17;var W=18;var G=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var A=512;var ak=new Array((L+2)*2);aw(ak);var ah=new Array(y*2);aw(ah);var e=new Array(A);aw(e);var f=new Array(Q-R+1);aw(f);var m=new Array(M);aw(m);var l=new Array(y);aw(l);function am(aB,az,ay,ax,aA){this.static_tree=aB;this.extra_bits=az;this.extra_base=ay;this.elems=ax;this.max_length=aA;this.has_stree=aB&&aB.length}var aj;var ag;var af;function ap(ax,ay){this.dyn_tree=ax;this.max_code=0;this.stat_desc=ay}function x(ax){return ax<256?e[ax]:e[256+(ax>>>7)]}function U(ax,ay){ax.pending_buf[ax.pending++]=(ay)&255;ax.pending_buf[ax.pending++]=(ay>>>8)&255}function ab(ay,az,ax){if(ay.bi_valid>(s-ax)){ay.bi_buf|=(az<<ay.bi_valid)&65535;U(ay,ay.bi_buf);ay.bi_buf=az>>(s-ay.bi_valid);ay.bi_valid+=ax-s}else{ay.bi_buf|=(az<<ay.bi_valid)&65535;ay.bi_valid+=ax}}function ac(ay,ax,az){ab(ay,az[ax*2],az[ax*2+1])}function o(ax,ay){var az=0;do{az|=ax&1;ax>>>=1;az<<=1}while(--ay>0);return az>>>1}function n(ax){if(ax.bi_valid===16){U(ax,ax.bi_buf);ax.bi_buf=0;ax.bi_valid=0}else{if(ax.bi_valid>=8){ax.pending_buf[ax.pending++]=ax.bi_buf&255;ax.bi_buf>>=8;ax.bi_valid-=8}}}function H(aJ,az){var aL=az.dyn_tree;var aF=az.max_code;var aK=az.stat_desc.static_tree;var aD=az.stat_desc.has_stree;var aA=az.stat_desc.extra_bits;var ax=az.stat_desc.extra_base;var aG=az.stat_desc.max_length;var aC;var aH,aE;var ay;var aM;var aB;var aI=0;for(ay=0;ay<=O;ay++){aJ.bl_count[ay]=0}aL[aJ.heap[aJ.heap_max]*2+1]=0;for(aC=aJ.heap_max+1;aC<J;aC++){aH=aJ.heap[aC];ay=aL[aL[aH*2+1]*2+1]+1;if(ay>aG){ay=aG;aI++}aL[aH*2+1]=ay;if(aH>aF){continue}aJ.bl_count[ay]++;aM=0;if(aH>=ax){aM=aA[aH-ax]}aB=aL[aH*2];aJ.opt_len+=aB*(ay+aM);if(aD){aJ.static_len+=aB*(aK[aH*2+1]+aM)}}if(aI===0){return}do{ay=aG-1;while(aJ.bl_count[ay]===0){ay--}aJ.bl_count[ay]--;aJ.bl_count[ay+1]+=2;aJ.bl_count[aG]--;aI-=2}while(aI>0);for(ay=aG;ay!==0;ay--){aH=aJ.bl_count[ay];while(aH!==0){aE=aJ.heap[--aC];if(aE>aF){continue}if(aL[aE*2+1]!==ay){aJ.opt_len+=(ay-aL[aE*2+1])*aL[aE*2];aL[aE*2+1]=ay}aH--}}}function I(aE,aB,ay){var aD=new Array(O+1);var az=0;var ax;var aC;for(ax=1;ax<=O;ax++){aD[ax]=az=(az+ay[ax-1])<<1}for(aC=0;aC<=aB;aC++){var aA=aE[aC*2+1];if(aA===0){continue}aE[aC*2]=o(aD[aA]++,aA)}}function ao(){var aC;var ax;var aB;var az;var aA;var ay=new Array(O+1);aB=0;for(az=0;az<M-1;az++){m[az]=aB;for(aC=0;aC<(1<<G[az]);aC++){f[aB++]=az}}f[aB-1]=az;aA=0;for(az=0;az<16;az++){l[az]=aA;for(aC=0;aC<(1<<F[az]);aC++){e[aA++]=az}}aA>>=7;for(;az<y;az++){l[az]=aA<<7;for(aC=0;aC<(1<<(F[az]-7));aC++){e[256+aA++]=az}}for(ax=0;ax<=O;ax++){ay[ax]=0}aC=0;while(aC<=143){ak[aC*2+1]=8;aC++;ay[8]++}while(aC<=255){ak[aC*2+1]=9;aC++;ay[9]++}while(aC<=279){ak[aC*2+1]=7;aC++;ay[7]++}while(aC<=287){ak[aC*2+1]=8;aC++;ay[8]++}I(ak,L+1,ay);for(aC=0;aC<y;aC++){ah[aC*2+1]=5;ah[aC*2]=o(aC,5)}aj=new am(ak,G,N+1,L,O);ag=new am(ah,F,0,y,O);af=new am(new Array(0),E,0,q,P)}function K(ay){var ax;for(ax=0;ax<L;ax++){ay.dyn_ltree[ax*2]=0}for(ax=0;ax<y;ax++){ay.dyn_dtree[ax*2]=0}for(ax=0;ax<q;ax++){ay.bl_tree[ax*2]=0}ay.dyn_ltree[C*2]=1;ay.opt_len=ay.static_len=0;ay.last_lit=ay.matches=0}function p(ax){if(ax.bi_valid>8){U(ax,ax.bi_buf)}else{if(ax.bi_valid>0){ax.pending_buf[ax.pending++]=ax.bi_buf}}ax.bi_buf=0;ax.bi_valid=0}function w(aA,ax,az,ay){p(aA);if(ay){U(aA,az);U(aA,~az)}aq.arraySet(aA.pending_buf,aA.window,ax,az,aA.pending);aA.pending+=az}function ae(aC,aB,aA,az){var ay=aB*2;var ax=aA*2;return(aC[ay]<aC[ax]||(aC[ay]===aC[ax]&&az[aB]<=az[aA]))}function T(az,aA,ay){var aB=az.heap[ay];var ax=ay<<1;while(ax<=az.heap_len){if(ax<az.heap_len&&ae(aA,az.heap[ax+1],az.heap[ax],az.depth)){ax++}if(ae(aA,aB,az.heap[ax],az.depth)){break}az.heap[ay]=az.heap[ax];ay=ax;ax<<=1}az.heap[ay]=aB}function v(aE,aC,az){var ay;var aB;var aD=0;var ax;var aA;if(aE.last_lit!==0){do{ay=(aE.pending_buf[aE.d_buf+aD*2]<<8)|(aE.pending_buf[aE.d_buf+aD*2+1]);aB=aE.pending_buf[aE.l_buf+aD];aD++;if(ay===0){ac(aE,aB,aC)}else{ax=f[aB];ac(aE,ax+N+1,aC);aA=G[ax];if(aA!==0){aB-=m[ax];ab(aE,aB,aA)}ay--;ax=x(ay);ac(aE,ax,az);aA=F[ax];if(aA!==0){ay-=l[ax];ab(aE,ay,aA)}}}while(aD<aE.last_lit)}ac(aE,C,aC)}function u(aE,ax){var aG=ax.dyn_tree;var aF=ax.stat_desc.static_tree;var az=ax.stat_desc.has_stree;var ay=ax.stat_desc.elems;var aC,aA;var aB=-1;var aD;aE.heap_len=0;aE.heap_max=J;for(aC=0;aC<ay;aC++){if(aG[aC*2]!==0){aE.heap[++aE.heap_len]=aB=aC;aE.depth[aC]=0}else{aG[aC*2+1]=0}}while(aE.heap_len<2){aD=aE.heap[++aE.heap_len]=(aB<2?++aB:0);aG[aD*2]=1;aE.depth[aD]=0;aE.opt_len--;if(az){aE.static_len-=aF[aD*2+1]}}ax.max_code=aB;for(aC=(aE.heap_len>>1);aC>=1;aC--){T(aE,aG,aC)}aD=ay;do{aC=aE.heap[1];aE.heap[1]=aE.heap[aE.heap_len--];T(aE,aG,1);aA=aE.heap[1];aE.heap[--aE.heap_max]=aC;aE.heap[--aE.heap_max]=aA;aG[aD*2]=aG[aC*2]+aG[aA*2];aE.depth[aD]=(aE.depth[aC]>=aE.depth[aA]?aE.depth[aC]:aE.depth[aA])+1;aG[aC*2+1]=aG[aA*2+1]=aD;aE.heap[1]=aD++;T(aE,aG,1)}while(aE.heap_len>=2);aE.heap[--aE.heap_max]=aE.heap[1];H(aE,ax);I(aG,aB,aE.bl_count)}function Z(aF,aG,az){var aC;var aE=-1;var ay;var aD=aG[0*2+1];var ax=0;var aA=7;var aB=4;if(aD===0){aA=138;aB=3}aG[(az+1)*2+1]=65535;for(aC=0;aC<=az;aC++){ay=aD;aD=aG[(aC+1)*2+1];if(++ax<aA&&ay===aD){continue}else{if(ax<aB){aF.bl_tree[ay*2]+=ax}else{if(ay!==0){if(ay!==aE){aF.bl_tree[ay*2]++}aF.bl_tree[V*2]++}else{if(ax<=10){aF.bl_tree[X*2]++}else{aF.bl_tree[W*2]++}}}}ax=0;aE=ay;if(aD===0){aA=138;aB=3}else{if(ay===aD){aA=6;aB=3}else{aA=7;aB=4}}}}function ad(aF,aG,az){var aC;var aE=-1;var ay;var aD=aG[0*2+1];var ax=0;var aA=7;var aB=4;if(aD===0){aA=138;aB=3}for(aC=0;aC<=az;aC++){ay=aD;aD=aG[(aC+1)*2+1];if(++ax<aA&&ay===aD){continue}else{if(ax<aB){do{ac(aF,ay,aF.bl_tree)}while(--ax!==0)}else{if(ay!==0){if(ay!==aE){ac(aF,ay,aF.bl_tree);ax--}ac(aF,V,aF.bl_tree);ab(aF,ax-3,2)}else{if(ax<=10){ac(aF,X,aF.bl_tree);ab(aF,ax-3,3)}else{ac(aF,W,aF.bl_tree);ab(aF,ax-11,7)}}}}ax=0;aE=ay;if(aD===0){aA=138;aB=3}else{if(ay===aD){aA=6;aB=3}else{aA=7;aB=4}}}}function t(ay){var ax;Z(ay,ay.dyn_ltree,ay.l_desc.max_code);Z(ay,ay.dyn_dtree,ay.d_desc.max_code);u(ay,ay.bl_desc);for(ax=q-1;ax>=3;ax--){if(ay.bl_tree[r[ax]*2+1]!==0){break}}ay.opt_len+=3*(ax+1)+5+5+4;return ax}function aa(aB,az,ay,ax){var aA;ab(aB,az-257,5);ab(aB,ay-1,5);ab(aB,ax-4,4);for(aA=0;aA<ax;aA++){ab(aB,aB.bl_tree[r[aA]*2+1],3)}ad(aB,aB.dyn_ltree,az-1);ad(aB,aB.dyn_dtree,ay-1)}function z(az){var ax=4093624447;var ay;for(ay=0;ay<=31;ay++,ax>>>=1){if((ax&1)&&(az.dyn_ltree[ay*2]!==0)){return ar}}if(az.dyn_ltree[9*2]!==0||az.dyn_ltree[10*2]!==0||az.dyn_ltree[13*2]!==0){return au}for(ay=32;ay<N;ay++){if(az.dyn_ltree[ay*2]!==0){return au}}return ar}var ai=!1;function i(ax){if(!ai){ao();ai=!0}ax.l_desc=new ap(ax.dyn_ltree,aj);ax.d_desc=new ap(ax.dyn_dtree,ag);ax.bl_desc=new ap(ax.bl_tree,af);ax.bi_buf=0;ax.bi_valid=0;K(ax)}function j(az,ax,aA,ay){ab(az,(an<<1)+(ay?1:0),3);w(az,ax,aA,!0)}function g(ax){ab(ax,al<<1,3);ac(ax,C,ak);n(ax)}function h(aB,ax,aD,ay){var aA,aC;var az=0;if(aB.level>0){if(aB.strm.data_type===av){aB.strm.data_type=z(aB)}u(aB,aB.l_desc);u(aB,aB.d_desc);az=t(aB);aA=(aB.opt_len+3+7)>>>3;aC=(aB.static_len+3+7)>>>3;if(aC<=aA){aA=aC}}else{aA=aC=aD+5}if((aD+4<=aA)&&(ax!==-1)){j(aB,ax,aD,ay)}else{if(aB.strategy===at||aC===aA){ab(aB,(al<<1)+(ay?1:0),3);v(aB,ak,ah)}else{ab(aB,(B<<1)+(ay?1:0),3);aa(aB,aB.l_desc.max_code+1,aB.d_desc.max_code+1,az+1);v(aB,aB.dyn_ltree,aB.dyn_dtree)}}K(aB);if(ay){p(aB)}}function k(az,ax,ay){az.pending_buf[az.d_buf+az.last_lit*2]=(ax>>>8)&255;az.pending_buf[az.d_buf+az.last_lit*2+1]=ax&255;az.pending_buf[az.l_buf+az.last_lit]=ay&255;az.last_lit++;if(ax===0){az.dyn_ltree[ay*2]++}else{az.matches++;ax--;az.dyn_ltree[(f[ay]+N+1)*2]++;az.dyn_dtree[x(ax)*2]++}return(az.last_lit===az.lit_bufsize-1)}D._tr_init=i;D._tr_stored_block=j;D._tr_flush_block=h;D._tr_tally=k;D._tr_align=g},{"../utils/common":1}],8:[function(g,f,e){function h(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}f.exports=h},{}],"/lib/deflate.js":[function(l,j,h){var x=l("./zlib/deflate");var o=l("./utils/common");var m=l("./utils/strings");var k=l("./zlib/messages");var y=l("./zlib/zstream");var n=Object.prototype.toString;var t=0;var s=4;var u=0;var v=1;var w=2;var p=-1;var q=0;var r=8;function f(B){if(!(this instanceof f)){return new f(B)}this.options=o.assign({level:p,method:r,chunkSize:16384,windowBits:15,memLevel:8,strategy:q,to:""},B||{});var A=this.options;if(A.raw&&(A.windowBits>0)){A.windowBits=-A.windowBits}else{if(A.gzip&&(A.windowBits>0)&&(A.windowBits<16)){A.windowBits+=16}}this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new y();this.strm.avail_out=0;var C=x.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(C!==u){throw new Error(k[C])}if(A.header){x.deflateSetHeader(this.strm,A.header)}if(A.dictionary){var z;if(typeof A.dictionary==="string"){z=m.string2buf(A.dictionary)}else{if(n.call(A.dictionary)==="[object ArrayBuffer]"){z=new Uint8Array(A.dictionary)}else{z=A.dictionary}}C=x.deflateSetDictionary(this.strm,z);if(C!==u){throw new Error(k[C])}this._dict_set=!0}}f.prototype.push=function(B,C){var E=this.strm;var A=this.options.chunkSize;var D,z;if(this.ended){return !1}z=(C===~~C)?C:((C===!0)?s:t);if(typeof B==="string"){E.input=m.string2buf(B)}else{if(n.call(B)==="[object ArrayBuffer]"){E.input=new Uint8Array(B)}else{E.input=B}}E.next_in=0;E.avail_in=E.input.length;do{if(E.avail_out===0){E.output=new o.Buf8(A);E.next_out=0;E.avail_out=A}D=x.deflate(E,z);if(D!==v&&D!==u){this.onEnd(D);this.ended=!0;return !1}if(E.avail_out===0||(E.avail_in===0&&(z===s||z===w))){if(this.options.to==="string"){this.onData(m.buf2binstring(o.shrinkBuf(E.output,E.next_out)))}else{this.onData(o.shrinkBuf(E.output,E.next_out))}}}while((E.avail_in>0||E.avail_out===0)&&D!==v);if(z===s){D=x.deflateEnd(this.strm);this.onEnd(D);this.ended=!0;return D===u}if(z===w){this.onEnd(u);E.avail_out=0;return !0}return !0};f.prototype.onData=function(z){this.chunks.push(z)};f.prototype.onEnd=function(z){if(z===u){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=o.flattenChunks(this.chunks)}}this.chunks=[];this.err=z;this.msg=this.strm.msg};function e(A,B){var z=new f(B);z.push(A,!0);if(z.err){throw z.msg}return z.result}function g(z,A){A=A||{};A.raw=!0;return e(z,A)}function i(z,A){A=A||{};A.gzip=!0;return e(z,A)}h.Deflate=f;h.deflate=e;h.deflateRaw=g;h.gzip=i},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")});