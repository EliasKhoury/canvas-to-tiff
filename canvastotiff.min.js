/*
	canvas-to-tiff version 1.5.3
	By Epistemex (c) 2015-2016
	www.epistemex.com
	MIT License (this header required)
*/
var CanvasToTIFF={_dly:9,_error:null,toArrayBuffer:function(e,c,C){C=C||{};this._error=C.onError||null;var z=this;try{var L=e.width,s=e.height,A=0,v=258,m=0,B=[],u,J="\x63\x61\x6e\x76\x61\x73\x2d\x74\x6f\x2d\x74\x69\x66\x66\x20\x31\x2e\x35\0",y=!!C.littleEndian,j=+(C.dpiX||C.dpi||96)|0,k=+(C.dpiY||C.dpi||96)|0,t=e.getContext("2d").getImageData(0,0,L,s),E=0,g=new Date(),d=typeof pako!=="undefined"&&typeof pako.deflate!=="undefined",f=typeof C.compressionLevel==="number"?Math.max(0,Math.min(9,C.compressionLevel)):6,F,x,q,o,p,K,i;if(typeof C.compress==="boolean"?C.compress:!0){if(d){F=pako.deflate(t.data,{level:f})}else{console.warn("Cannot compress. See docs.")}}x=F?F.length:t.data.length;q=v+x;o=new ArrayBuffer(q);p=new Uint8Array(o);K=new DataView(o);G(y?18761:19789);G(42);H(8);b();a(254,4,1,0);a(256,4,1,L);a(257,4,1,s);a(258,3,4,A,8);a(259,3,1,F?8:1);a(262,3,1,2);a(273,4,1,v,0);a(277,3,1,4);a(279,4,1,x);a(282,5,1,A,8);a(283,5,1,A,8);a(296,3,1,2);a(305,2,J.length,A,r(J));a(306,2,20,A,20);a(338,3,1,2);l();H(524296);H(524296);H(j);H(1);H(k);H(1);I(J);i=g.getFullYear()+":"+D(g.getMonth()+1)+":"+D(g.getDate())+" ";i+=D(g.getHours())+":"+D(g.getMinutes())+":"+D(g.getSeconds());I(i);p.set(F?F:t.data,v);setTimeout(function(){c(o)},z._dly)}catch(n){if(z._error){z._error(n.toString())}}function D(h){h+="";return h.length===1?"0"+h:h}function G(h){K.setUint16(E,h,y);E+=2}function H(h){K.setUint32(E,h,y);E+=4}function I(w){var h=0;while(h<w.length){K.setUint8(E++,w.charCodeAt(h++)&255,y)}if(E&1){E++}}function r(w){var h=w.length;return h&1?h+1:h}function a(M,N,h,O,w){G(M);G(N);H(h);if(w){A+=w;B.push(E)}if(h===1&&N===3&&!w){G(O);G(0)}else{H(O)}m++}function b(h){u=h||E;E+=2}function l(){K.setUint16(u,m,y);H(0);var h=14+m*12;for(var w=0,N,M;w<B.length;w++){N=B[w];M=K.getUint32(N,y);K.setUint32(N,M+h,y)}}},toBlob:function(b,a,c){this.toArrayBuffer(b,function(d){a(new Blob([d],{type:"image/tiff"}))},c)},toObjectURL:function(b,a,c){this.toBlob(b,function(d){a((window.URL||window.webkitURL).createObjectURL(d))},c)},toDataURL:function(b,a,d){var c=this;c.toArrayBuffer(b,function(k){var j=new Uint8Array(k),g=1<<20,f=g,h="",e="",m=0,n=j.length;(function o(){while(m<n&&f-->0){h+=String.fromCharCode(j[m++])}if(m<n){f=g;setTimeout(o,c._dly)}else{m=0;n=h.length;f=180000;(function i(){e+=btoa(h.substr(m,f));m+=f;(m<n)?setTimeout(i,c._dly):a("data:image/tiff;base64,"+e)})()}})()},d)}};(function(a){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=a()}else{if(typeof define==="function"&&define.amd){define([],a)}else{var b;if(typeof window!=="undefined"){b=window}else{if(typeof global!=="undefined"){b=global}else{if(typeof self!=="undefined"){b=self}else{b=this}}}b.pako=a()}}})(function(){var b;return(function a(h,d,f){function g(m,n){if(!d[m]){if(!h[m]){var i=typeof require=="function"&&require;if(!n&&i){return i(m,!0)}if(c){return c(m,!0)}var j=new Error("Can't find mod '"+m+"'");throw j.code="MODULE_NOT_FOUND",j}var k=d[m]={exports:{}};h[m][0].call(k.exports,function(l){var o=h[m][1][l];return g(o?o:l)},k,k.exports,a,h,d,f)}return d[m].exports}var c=typeof require=="function"&&require;for(var e=0;e<f.length;e++){g(f[e])}return g})({1:[function(g,f,c){var h="ArrayBuffer" in window;c.assign=function(i){var l=Array.prototype.slice.call(arguments,1);while(l.length){var k=l.shift();if(!k){continue}if(typeof k!=="object"){throw new TypeError(k+"must be non-object")}for(var j in k){if(k.hasOwnProperty(j)){i[j]=k[j]}}}return i};c.shrinkBuf=function(i,j){if(i.length===j){return i}if(i.subarray){return i.subarray(0,j)}i.length=j;return i};var d={arraySet:function(j,n,o,m,k){if(n.subarray&&j.subarray){j.set(n.subarray(o,o+m),k);return}for(var l=0;l<m;l++){j[k+l]=n[o+l]}},flattenChunks:function(k){var m,n,o,p,j,q;o=0;for(m=0,n=k.length;m<n;m++){o+=k[m].length}q=new Uint8Array(o);p=0;for(m=0,n=k.length;m<n;m++){j=k[m];q.set(j,p);p+=j.length}return q}};var e={arraySet:function(j,n,o,m,k){for(var l=0;l<m;l++){j[k+l]=n[o+l]}},flattenChunks:function(i){return[].concat.apply([],i)}};c.setTyped=function(i){if(i){c.Buf8=Uint8Array;c.Buf16=Uint16Array;c.Buf32=Int32Array;c.assign(c,d)}else{c.Buf8=Array;c.Buf16=Array;c.Buf32=Array;c.assign(c,e)}};c.setTyped(h)},{}],2:[function(e){var f=e("./common");var c=new f.Buf8(256);for(var d=0;d<256;d++){c[d]=(d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1)}c[254]=c[254]=1},{"./common":1}],3:[function(e,d){function c(f,g,h,j){var k=(f&65535)|0,l=((f>>>16)&65535)|0,i=0;while(h!==0){i=h>2000?2000:h;h-=i;do{k=(k+g[j++])|0;l=(l+k)|0}while(--i);k%=65521;l%=65521}return(k|(l<<16))|0}d.exports=c},{}],4:[function(g,f){function e(){var h,l=[];for(var j=0;j<256;j++){h=j;for(var i=0;i<8;i++){h=((h&1)?(3988292384^(h>>>1)):(h>>>1))}l[j]=h}return l}var d=e();function c(j,h,m,n){var o=d,k=n+m;j^=-1;for(var l=n;l<k;l++){j=(j>>>8)^o[(j^h[l])&255]}return(j^(-1))}f.exports=c},{}],5:[function(ag,X,E){var aj=ag("../utils/common");var ai=ag("./trees");var c=ag("./adler32");var m=ag("./crc32");var Y=ag("./messages");var aw=0;var ay=1;var au=3;var ar=4;var ak=5;var ax=0;var aA=1;var aB=-2;var am=-3;var al=-5;var an=-1;var aq=1;var av=2;var az=3;var at=4;var ao=0;var aC=2;var ap=8;var T=9;var U=15;var o=8;var O=29;var P=256;var N=P+1+O;var n=30;var d=19;var L=2*N+1;var R=15;var W=3;var S=258;var V=(S+W+1);var ab=32;var M=42;var F=69;var Z=73;var j=91;var K=103;var i=113;var H=666;var h=1;var e=2;var g=3;var f=4;var aa=3;function D(aF,aE){aF.msg=Y[aE];return aE}function ae(aE){return((aE)<<1)-((aE)>4?9:0)}function aD(aE){var aF=aE.length;while(--aF>=0){aE[aF]=0}}function J(aG){var aF=aG.state;var aE=aF.pending;if(aE>aG.avail_out){aE=aG.avail_out}if(aE===0){return}aj.arraySet(aG.output,aF.pending_buf,aF.pending_out,aE,aG.next_out);aG.next_out+=aE;aF.pending_out+=aE;aG.total_out+=aE;aG.avail_out-=aE;aF.pending-=aE;if(aF.pending===0){aF.pending_out=0}}function I(aF,aE){ai._tr_flush_block(aF,(aF.block_start>=0?aF.block_start:-1),aF.strstart-aF.block_start,aE);aF.block_start=aF.strstart;J(aF.strm)}function ac(aF,aE){aF.pending_buf[aF.pending++]=aE}function ad(aF,aE){aF.pending_buf[aF.pending++]=(aE>>>8)&255;aF.pending_buf[aF.pending++]=aE&255}function af(aI,aE,aH,aG){var aF=aI.avail_in;if(aF>aG){aF=aG}if(aF===0){return 0}aI.avail_in-=aF;aj.arraySet(aE,aI.input,aI.next_in,aF,aH);if(aI.state.wrap===1){aI.adler=c(aI.adler,aE,aF,aH)}else{if(aI.state.wrap===2){aI.adler=m(aI.adler,aE,aF,aH)}}aI.next_in+=aF;aI.total_in+=aF;return aF}function ah(aN,aH){var aG=aN.max_chain_length;var aO=aN.strstart;var aK;var aI;var aF=aN.prev_length;var aL=aN.nice_match;var aJ=(aN.strstart>(aN.w_size-V))?aN.strstart-(aN.w_size-V):0;var aE=aN.window;var aS=aN.w_mask;var aM=aN.prev;var aR=aN.strstart+S;var aQ=aE[aO+aF-1];var aP=aE[aO+aF];if(aN.prev_length>=aN.good_match){aG>>=2}if(aL>aN.lookahead){aL=aN.lookahead}do{aK=aH;if(aE[aK+aF]!==aP||aE[aK+aF-1]!==aQ||aE[aK]!==aE[aO]||aE[++aK]!==aE[aO+1]){continue}aO+=2;aK++;do{}while(aE[++aO]===aE[++aK]&&aE[++aO]===aE[++aK]&&aE[++aO]===aE[++aK]&&aE[++aO]===aE[++aK]&&aE[++aO]===aE[++aK]&&aE[++aO]===aE[++aK]&&aE[++aO]===aE[++aK]&&aE[++aO]===aE[++aK]&&aO<aR);aI=S-(aR-aO);aO=aR-S;if(aI>aF){aN.match_start=aH;aF=aI;if(aI>=aL){break}aQ=aE[aO+aF-1];aP=aE[aO+aF]}}while((aH=aM[aH&aS])>aJ&&--aG!==0);if(aF<=aN.lookahead){return aF}return aN.lookahead}function G(aJ){var aE=aJ.w_size;var aI,aH,aF,aG,aK;do{aG=aJ.window_size-aJ.lookahead-aJ.strstart;if(aJ.strstart>=aE+(aE-V)){aj.arraySet(aJ.window,aJ.window,aE,aE,0);aJ.match_start-=aE;aJ.strstart-=aE;aJ.block_start-=aE;aH=aJ.hash_size;aI=aH;do{aF=aJ.head[--aI];aJ.head[aI]=(aF>=aE?aF-aE:0)}while(--aH);aH=aE;aI=aH;do{aF=aJ.prev[--aI];aJ.prev[aI]=(aF>=aE?aF-aE:0)}while(--aH);aG+=aE}if(aJ.strm.avail_in===0){break}aH=af(aJ.strm,aJ.window,aJ.strstart+aJ.lookahead,aG);aJ.lookahead+=aH;if(aJ.lookahead+aJ.insert>=W){aK=aJ.strstart-aJ.insert;aJ.ins_h=aJ.window[aK];aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aK+1])&aJ.hash_mask;while(aJ.insert){aJ.ins_h=((aJ.ins_h<<aJ.hash_shift)^aJ.window[aK+W-1])&aJ.hash_mask;aJ.prev[aK&aJ.w_mask]=aJ.head[aJ.ins_h];aJ.head[aJ.ins_h]=aK;aK++;aJ.insert--;if(aJ.lookahead+aJ.insert<W){break}}}}while(aJ.lookahead<V&&aJ.strm.avail_in!==0)}function u(aH,aE){var aF=65535;if(aF>aH.pending_buf_size-5){aF=aH.pending_buf_size-5}for(;;){if(aH.lookahead<=1){G(aH);if(aH.lookahead===0&&aE===aw){return h}if(aH.lookahead===0){break}}aH.strstart+=aH.lookahead;aH.lookahead=0;var aG=aH.block_start+aF;if(aH.strstart===0||aH.strstart>=aG){aH.lookahead=aH.strstart-aG;aH.strstart=aG;I(aH,!1);if(aH.strm.avail_out===0){return h}}if(aH.strstart-aH.block_start>=(aH.w_size-V)){I(aH,!1);if(aH.strm.avail_out===0){return h}}}aH.insert=0;if(aE===ar){I(aH,!0);if(aH.strm.avail_out===0){return g}return f}if(aH.strstart>aH.block_start){I(aH,!1);if(aH.strm.avail_out===0){return h}}return h}function q(aH,aF){var aG;var aE;for(;;){if(aH.lookahead<V){G(aH);if(aH.lookahead<V&&aF===aw){return h}if(aH.lookahead===0){break}}aG=0;if(aH.lookahead>=W){aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aH.strstart+W-1])&aH.hash_mask;aG=aH.prev[aH.strstart&aH.w_mask]=aH.head[aH.ins_h];aH.head[aH.ins_h]=aH.strstart}if(aG!==0&&((aH.strstart-aG)<=(aH.w_size-V))){aH.match_length=ah(aH,aG)}if(aH.match_length>=W){aE=ai._tr_tally(aH,aH.strstart-aH.match_start,aH.match_length-W);aH.lookahead-=aH.match_length;if(aH.match_length<=aH.max_lazy_match&&aH.lookahead>=W){aH.match_length--;do{aH.strstart++;aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aH.strstart+W-1])&aH.hash_mask;aG=aH.prev[aH.strstart&aH.w_mask]=aH.head[aH.ins_h];aH.head[aH.ins_h]=aH.strstart}while(--aH.match_length!==0);aH.strstart++}else{aH.strstart+=aH.match_length;aH.match_length=0;aH.ins_h=aH.window[aH.strstart];aH.ins_h=((aH.ins_h<<aH.hash_shift)^aH.window[aH.strstart+1])&aH.hash_mask}}else{aE=ai._tr_tally(aH,0,aH.window[aH.strstart]);aH.lookahead--;aH.strstart++}if(aE){I(aH,!1);if(aH.strm.avail_out===0){return h}}}aH.insert=((aH.strstart<(W-1))?aH.strstart:W-1);if(aF===ar){I(aH,!0);if(aH.strm.avail_out===0){return g}return f}if(aH.last_lit){I(aH,!1);if(aH.strm.avail_out===0){return h}}return e}function t(aI,aF){var aG;var aE;var aH;for(;;){if(aI.lookahead<V){G(aI);if(aI.lookahead<V&&aF===aw){return h}if(aI.lookahead===0){break}}aG=0;if(aI.lookahead>=W){aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aI.strstart+W-1])&aI.hash_mask;aG=aI.prev[aI.strstart&aI.w_mask]=aI.head[aI.ins_h];aI.head[aI.ins_h]=aI.strstart}aI.prev_length=aI.match_length;aI.prev_match=aI.match_start;aI.match_length=W-1;if(aG!==0&&aI.prev_length<aI.max_lazy_match&&aI.strstart-aG<=(aI.w_size-V)){aI.match_length=ah(aI,aG);if(aI.match_length<=5&&(aI.strategy===aq||(aI.match_length===W&&aI.strstart-aI.match_start>4096))){aI.match_length=W-1}}if(aI.prev_length>=W&&aI.match_length<=aI.prev_length){aH=aI.strstart+aI.lookahead-W;aE=ai._tr_tally(aI,aI.strstart-1-aI.prev_match,aI.prev_length-W);aI.lookahead-=aI.prev_length-1;aI.prev_length-=2;do{if(++aI.strstart<=aH){aI.ins_h=((aI.ins_h<<aI.hash_shift)^aI.window[aI.strstart+W-1])&aI.hash_mask;aG=aI.prev[aI.strstart&aI.w_mask]=aI.head[aI.ins_h];aI.head[aI.ins_h]=aI.strstart}}while(--aI.prev_length!==0);aI.match_available=0;aI.match_length=W-1;aI.strstart++;if(aE){I(aI,!1);if(aI.strm.avail_out===0){return h}}}else{if(aI.match_available){aE=ai._tr_tally(aI,0,aI.window[aI.strstart-1]);if(aE){I(aI,!1)}aI.strstart++;aI.lookahead--;if(aI.strm.avail_out===0){return h}}else{aI.match_available=1;aI.strstart++;aI.lookahead--}}}if(aI.match_available){aE=ai._tr_tally(aI,0,aI.window[aI.strstart-1]);aI.match_available=0}aI.insert=aI.strstart<W-1?aI.strstart:W-1;if(aF===ar){I(aI,!0);if(aI.strm.avail_out===0){return g}return f}if(aI.last_lit){I(aI,!1);if(aI.strm.avail_out===0){return h}}return e}function s(aI,aG){var aF;var aH;var aJ,aK;var aE=aI.window;for(;;){if(aI.lookahead<=S){G(aI);if(aI.lookahead<=S&&aG===aw){return h}if(aI.lookahead===0){break}}aI.match_length=0;if(aI.lookahead>=W&&aI.strstart>0){aJ=aI.strstart-1;aH=aE[aJ];if(aH===aE[++aJ]&&aH===aE[++aJ]&&aH===aE[++aJ]){aK=aI.strstart+S;do{}while(aH===aE[++aJ]&&aH===aE[++aJ]&&aH===aE[++aJ]&&aH===aE[++aJ]&&aH===aE[++aJ]&&aH===aE[++aJ]&&aH===aE[++aJ]&&aH===aE[++aJ]&&aJ<aK);aI.match_length=S-(aK-aJ);if(aI.match_length>aI.lookahead){aI.match_length=aI.lookahead}}}if(aI.match_length>=W){aF=ai._tr_tally(aI,1,aI.match_length-W);aI.lookahead-=aI.match_length;aI.strstart+=aI.match_length;aI.match_length=0}else{aF=ai._tr_tally(aI,0,aI.window[aI.strstart]);aI.lookahead--;aI.strstart++}if(aF){I(aI,!1);if(aI.strm.avail_out===0){return h}}}aI.insert=0;if(aG===ar){I(aI,!0);if(aI.strm.avail_out===0){return g}return f}if(aI.last_lit){I(aI,!1);if(aI.strm.avail_out===0){return h}}return e}function r(aG,aF){var aE;for(;;){if(aG.lookahead===0){G(aG);if(aG.lookahead===0){if(aF===aw){return h}break}}aG.match_length=0;aE=ai._tr_tally(aG,0,aG.window[aG.strstart]);aG.lookahead--;aG.strstart++;if(aE){I(aG,!1);if(aG.strm.avail_out===0){return h}}}aG.insert=0;if(aF===ar){I(aG,!0);if(aG.strm.avail_out===0){return g}return f}if(aG.last_lit){I(aG,!1);if(aG.strm.avail_out===0){return h}}return e}function k(aF,aH,aI,aG,aE){this.good_length=aF;this.max_lazy=aH;this.nice_length=aI;this.max_chain=aG;this.func=aE}var l;l=[new k(0,0,0,0,u),new k(4,4,8,4,q),new k(4,5,16,8,q),new k(4,6,32,32,q),new k(4,4,16,16,t),new k(8,16,32,32,t),new k(8,16,128,128,t),new k(8,32,128,256,t),new k(32,128,258,1024,t),new k(32,258,258,4096,t)];function Q(aE){aE.window_size=2*aE.w_size;aD(aE.head);aE.max_lazy_match=l[aE.level].max_lazy;aE.good_match=l[aE.level].good_length;aE.nice_match=l[aE.level].nice_length;aE.max_chain_length=l[aE.level].max_chain;aE.strstart=0;aE.block_start=0;aE.lookahead=0;aE.insert=0;aE.match_length=aE.prev_length=W-1;aE.match_available=0;aE.ins_h=0}function C(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=ap;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new aj.Buf16(L*2);this.dyn_dtree=new aj.Buf16((2*n+1)*2);this.bl_tree=new aj.Buf16((2*d+1)*2);aD(this.dyn_ltree);aD(this.dyn_dtree);aD(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new aj.Buf16(R+1);this.heap=new aj.Buf16(2*N+1);aD(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new aj.Buf16(2*N+1);aD(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function z(aF){var aE;if(!aF||!aF.state){return D(aF,aB)}aF.total_in=aF.total_out=0;aF.data_type=aC;aE=aF.state;aE.pending=0;aE.pending_out=0;if(aE.wrap<0){aE.wrap=-aE.wrap}aE.status=(aE.wrap?M:i);aF.adler=(aE.wrap===2)?0:1;aE.last_flush=aw;ai._tr_init(aE);return ax}function y(aF){var aE=z(aF);if(aE===ax){Q(aF.state)}return aE}function B(aF,aE){if(!aF||!aF.state){return aB}if(aF.state.wrap!==2){return aB}aF.state.gzhead=aE;return ax}function x(aJ,aE,aG,aK,aF,aI){if(!aJ){return aB}var aL=1;if(aE===an){aE=6}if(aK<0){aL=0;aK=-aK}else{if(aK>15){aL=2;aK-=16}}if(aF<1||aF>T||aG!==ap||aK<8||aK>15||aE<0||aE>9||aI<0||aI>at){return D(aJ,aB)}if(aK===8){aK=9}var aH=new C();aJ.state=aH;aH.strm=aJ;aH.wrap=aL;aH.gzhead=null;aH.w_bits=aK;aH.w_size=1<<aH.w_bits;aH.w_mask=aH.w_size-1;aH.hash_bits=aF+7;aH.hash_size=1<<aH.hash_bits;aH.hash_mask=aH.hash_size-1;aH.hash_shift=~~((aH.hash_bits+W-1)/W);aH.window=new aj.Buf8(aH.w_size*2);aH.head=new aj.Buf16(aH.hash_size);aH.prev=new aj.Buf16(aH.w_size);aH.lit_bufsize=1<<(aF+6);aH.pending_buf_size=aH.lit_bufsize*4;aH.pending_buf=new aj.Buf8(aH.pending_buf_size);aH.d_buf=aH.lit_bufsize>>1;aH.l_buf=(1+2)*aH.lit_bufsize;aH.level=aE;aH.strategy=aI;aH.method=aG;return y(aJ)}function w(aF,aE){return x(aF,aE,ap,U,o,ao)}function p(aL,aG){var aJ,aK;var aE,aM;if(!aL||!aL.state||aG>ak||aG<0){return aL?D(aL,aB):aB}aK=aL.state;if(!aL.output||(!aL.input&&aL.avail_in!==0)||(aK.status===H&&aG!==ar)){return D(aL,(aL.avail_out===0)?al:aB)}aK.strm=aL;aJ=aK.last_flush;aK.last_flush=aG;if(aK.status===M){if(aK.wrap===2){aL.adler=0;ac(aK,31);ac(aK,139);ac(aK,8);if(!aK.gzhead){ac(aK,0);ac(aK,0);ac(aK,0);ac(aK,0);ac(aK,0);ac(aK,aK.level===9?2:(aK.strategy>=av||aK.level<2?4:0));ac(aK,aa);aK.status=i}else{ac(aK,(aK.gzhead.text?1:0)+(aK.gzhead.hcrc?2:0)+(!aK.gzhead.extra?0:4)+(!aK.gzhead.name?0:8)+(!aK.gzhead.comment?0:16));ac(aK,aK.gzhead.time&255);ac(aK,(aK.gzhead.time>>8)&255);ac(aK,(aK.gzhead.time>>16)&255);ac(aK,(aK.gzhead.time>>24)&255);ac(aK,aK.level===9?2:(aK.strategy>=av||aK.level<2?4:0));ac(aK,aK.gzhead.os&255);if(aK.gzhead.extra&&aK.gzhead.extra.length){ac(aK,aK.gzhead.extra.length&255);ac(aK,(aK.gzhead.extra.length>>8)&255)}if(aK.gzhead.hcrc){aL.adler=m(aL.adler,aK.pending_buf,aK.pending,0)}aK.gzindex=0;aK.status=F}}else{var aH=(ap+((aK.w_bits-8)<<4))<<8;var aI=-1;if(aK.strategy>=av||aK.level<2){aI=0}else{if(aK.level<6){aI=1}else{if(aK.level===6){aI=2}else{aI=3}}}aH|=(aI<<6);if(aK.strstart!==0){aH|=ab}aH+=31-(aH%31);aK.status=i;ad(aK,aH);if(aK.strstart!==0){ad(aK,aL.adler>>>16);ad(aK,aL.adler&65535)}aL.adler=1}}if(aK.status===F){if(aK.gzhead.extra){aE=aK.pending;while(aK.gzindex<(aK.gzhead.extra.length&65535)){if(aK.pending===aK.pending_buf_size){if(aK.gzhead.hcrc&&aK.pending>aE){aL.adler=m(aL.adler,aK.pending_buf,aK.pending-aE,aE)}J(aL);aE=aK.pending;if(aK.pending===aK.pending_buf_size){break}}ac(aK,aK.gzhead.extra[aK.gzindex]&255);aK.gzindex++}if(aK.gzhead.hcrc&&aK.pending>aE){aL.adler=m(aL.adler,aK.pending_buf,aK.pending-aE,aE)}if(aK.gzindex===aK.gzhead.extra.length){aK.gzindex=0;aK.status=Z}}else{aK.status=Z}}if(aK.status===Z){if(aK.gzhead.name){aE=aK.pending;do{if(aK.pending===aK.pending_buf_size){if(aK.gzhead.hcrc&&aK.pending>aE){aL.adler=m(aL.adler,aK.pending_buf,aK.pending-aE,aE)}J(aL);aE=aK.pending;if(aK.pending===aK.pending_buf_size){aM=1;break}}if(aK.gzindex<aK.gzhead.name.length){aM=aK.gzhead.name.charCodeAt(aK.gzindex++)&255}else{aM=0}ac(aK,aM)}while(aM!==0);if(aK.gzhead.hcrc&&aK.pending>aE){aL.adler=m(aL.adler,aK.pending_buf,aK.pending-aE,aE)}if(aM===0){aK.gzindex=0;aK.status=j}}else{aK.status=j}}if(aK.status===j){if(aK.gzhead.comment){aE=aK.pending;do{if(aK.pending===aK.pending_buf_size){if(aK.gzhead.hcrc&&aK.pending>aE){aL.adler=m(aL.adler,aK.pending_buf,aK.pending-aE,aE)}J(aL);aE=aK.pending;if(aK.pending===aK.pending_buf_size){aM=1;break}}if(aK.gzindex<aK.gzhead.comment.length){aM=aK.gzhead.comment.charCodeAt(aK.gzindex++)&255}else{aM=0}ac(aK,aM)}while(aM!==0);if(aK.gzhead.hcrc&&aK.pending>aE){aL.adler=m(aL.adler,aK.pending_buf,aK.pending-aE,aE)}if(aM===0){aK.status=K}}else{aK.status=K}}if(aK.status===K){if(aK.gzhead.hcrc){if(aK.pending+2>aK.pending_buf_size){J(aL)}if(aK.pending+2<=aK.pending_buf_size){ac(aK,aL.adler&255);ac(aK,(aL.adler>>8)&255);aL.adler=0;aK.status=i}}else{aK.status=i}}if(aK.pending!==0){J(aL);if(aL.avail_out===0){aK.last_flush=-1;return ax}}else{if(aL.avail_in===0&&ae(aG)<=ae(aJ)&&aG!==ar){return D(aL,al)}}if(aK.status===H&&aL.avail_in!==0){return D(aL,al)}if(aL.avail_in!==0||aK.lookahead!==0||(aG!==aw&&aK.status!==H)){var aF=(aK.strategy===av)?r(aK,aG):(aK.strategy===az?s(aK,aG):l[aK.level].func(aK,aG));if(aF===g||aF===f){aK.status=H}if(aF===h||aF===g){if(aL.avail_out===0){aK.last_flush=-1}return ax}if(aF===e){if(aG===ay){ai._tr_align(aK)}else{if(aG!==ak){ai._tr_stored_block(aK,0,0,!1);if(aG===au){aD(aK.head);if(aK.lookahead===0){aK.strstart=0;aK.block_start=0;aK.insert=0}}}}J(aL);if(aL.avail_out===0){aK.last_flush=-1;return ax}}}if(aG!==ar){return ax}if(aK.wrap<=0){return aA}if(aK.wrap===2){ac(aK,aL.adler&255);ac(aK,(aL.adler>>8)&255);ac(aK,(aL.adler>>16)&255);ac(aK,(aL.adler>>24)&255);ac(aK,aL.total_in&255);ac(aK,(aL.total_in>>8)&255);ac(aK,(aL.total_in>>16)&255);ac(aK,(aL.total_in>>24)&255)}else{ad(aK,aL.adler>>>16);ad(aK,aL.adler&65535)}J(aL);if(aK.wrap>0){aK.wrap=-aK.wrap}return aK.pending!==0?ax:aA}function v(aF){var aE;if(!aF||!aF.state){return aB}aE=aF.state.status;if(aE!==M&&aE!==F&&aE!==Z&&aE!==j&&aE!==K&&aE!==i&&aE!==H){return D(aF,aB)}aF.state=null;return aE===i?D(aF,am):ax}function A(aM,aF){var aG=aF.length;var aK;var aL,aI;var aO;var aE;var aJ;var aH;var aN;if(!aM||!aM.state){return aB}aK=aM.state;aO=aK.wrap;if(aO===2||(aO===1&&aK.status!==M)||aK.lookahead){return aB}if(aO===1){aM.adler=c(aM.adler,aF,aG,0)}aK.wrap=0;if(aG>=aK.w_size){if(aO===0){aD(aK.head);aK.strstart=0;aK.block_start=0;aK.insert=0}aN=new aj.Buf8(aK.w_size);aj.arraySet(aN,aF,aG-aK.w_size,aK.w_size,0);aF=aN;aG=aK.w_size}aE=aM.avail_in;aJ=aM.next_in;aH=aM.input;aM.avail_in=aG;aM.next_in=0;aM.input=aF;G(aK);while(aK.lookahead>=W){aL=aK.strstart;aI=aK.lookahead-(W-1);do{aK.ins_h=((aK.ins_h<<aK.hash_shift)^aK.window[aL+W-1])&aK.hash_mask;aK.prev[aL&aK.w_mask]=aK.head[aK.ins_h];aK.head[aK.ins_h]=aL;aL++}while(--aI);aK.strstart=aL;aK.lookahead=W-1;G(aK)}aK.strstart+=aK.lookahead;aK.block_start=aK.strstart;aK.insert=aK.lookahead;aK.lookahead=0;aK.match_length=aK.prev_length=W-1;aK.match_available=0;aM.next_in=aJ;aM.input=aH;aM.avail_in=aE;aK.wrap=aO;return ax}E.deflateInit=w;E.deflateInit2=x;E.deflateReset=y;E.deflateResetKeep=z;E.deflateSetHeader=B;E.deflate=p;E.deflateEnd=v;E.deflateSetDictionary=A;E.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(d,c){c.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(W,Q,B){var ao=W("../utils/common");var aq=4;var ap=0;var ar=1;var at=2;function au(av){var aw=av.length;while(--aw>=0){av[aw]=0}}var al=0;var aj=1;var z=2;var P=3;var O=258;var K=29;var L=256;var J=L+1+K;var w=30;var o=19;var H=2*J+1;var M=15;var q=16;var N=7;var A=256;var T=16;var V=17;var U=18;var E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var p=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var y=512;var ai=new Array((J+2)*2);au(ai);var af=new Array(w*2);au(af);var c=new Array(y);au(c);var d=new Array(O-P+1);au(d);var k=new Array(K);au(k);var j=new Array(w);au(j);function ak(az,ax,aw,av,ay){this.static_tree=az;this.extra_bits=ax;this.extra_base=aw;this.elems=av;this.max_length=ay;this.has_stree=az&&az.length}var ah;var ae;var ad;function an(av,aw){this.dyn_tree=av;this.max_code=0;this.stat_desc=aw}function v(av){return av<256?c[av]:c[256+(av>>>7)]}function S(av,aw){av.pending_buf[av.pending++]=(aw)&255;av.pending_buf[av.pending++]=(aw>>>8)&255}function Z(aw,ax,av){if(aw.bi_valid>(q-av)){aw.bi_buf|=(ax<<aw.bi_valid)&65535;S(aw,aw.bi_buf);aw.bi_buf=ax>>(q-aw.bi_valid);aw.bi_valid+=av-q}else{aw.bi_buf|=(ax<<aw.bi_valid)&65535;aw.bi_valid+=av}}function aa(aw,av,ax){Z(aw,ax[av*2],ax[av*2+1])}function m(av,aw){var ax=0;do{ax|=av&1;av>>>=1;ax<<=1}while(--aw>0);return ax>>>1}function l(av){if(av.bi_valid===16){S(av,av.bi_buf);av.bi_buf=0;av.bi_valid=0}else{if(av.bi_valid>=8){av.pending_buf[av.pending++]=av.bi_buf&255;av.bi_buf>>=8;av.bi_valid-=8}}}function F(aH,ax){var aJ=ax.dyn_tree;var aD=ax.max_code;var aI=ax.stat_desc.static_tree;var aB=ax.stat_desc.has_stree;var ay=ax.stat_desc.extra_bits;var av=ax.stat_desc.extra_base;var aE=ax.stat_desc.max_length;var aA;var aF,aC;var aw;var aK;var az;var aG=0;for(aw=0;aw<=M;aw++){aH.bl_count[aw]=0}aJ[aH.heap[aH.heap_max]*2+1]=0;for(aA=aH.heap_max+1;aA<H;aA++){aF=aH.heap[aA];aw=aJ[aJ[aF*2+1]*2+1]+1;if(aw>aE){aw=aE;aG++}aJ[aF*2+1]=aw;if(aF>aD){continue}aH.bl_count[aw]++;aK=0;if(aF>=av){aK=ay[aF-av]}az=aJ[aF*2];aH.opt_len+=az*(aw+aK);if(aB){aH.static_len+=az*(aI[aF*2+1]+aK)}}if(aG===0){return}do{aw=aE-1;while(aH.bl_count[aw]===0){aw--}aH.bl_count[aw]--;aH.bl_count[aw+1]+=2;aH.bl_count[aE]--;aG-=2}while(aG>0);for(aw=aE;aw!==0;aw--){aF=aH.bl_count[aw];while(aF!==0){aC=aH.heap[--aA];if(aC>aD){continue}if(aJ[aC*2+1]!==aw){aH.opt_len+=(aw-aJ[aC*2+1])*aJ[aC*2];aJ[aC*2+1]=aw}aF--}}}function G(aC,az,aw){var aB=new Array(M+1);var ax=0;var av;var aA;for(av=1;av<=M;av++){aB[av]=ax=(ax+aw[av-1])<<1}for(aA=0;aA<=az;aA++){var ay=aC[aA*2+1];if(ay===0){continue}aC[aA*2]=m(aB[ay]++,ay)}}function am(){var aA;var av;var az;var ax;var ay;var aw=new Array(M+1);az=0;for(ax=0;ax<K-1;ax++){k[ax]=az;for(aA=0;aA<(1<<E[ax]);aA++){d[az++]=ax}}d[az-1]=ax;ay=0;for(ax=0;ax<16;ax++){j[ax]=ay;for(aA=0;aA<(1<<D[ax]);aA++){c[ay++]=ax}}ay>>=7;for(;ax<w;ax++){j[ax]=ay<<7;for(aA=0;aA<(1<<(D[ax]-7));aA++){c[256+ay++]=ax}}for(av=0;av<=M;av++){aw[av]=0}aA=0;while(aA<=143){ai[aA*2+1]=8;aA++;aw[8]++}while(aA<=255){ai[aA*2+1]=9;aA++;aw[9]++}while(aA<=279){ai[aA*2+1]=7;aA++;aw[7]++}while(aA<=287){ai[aA*2+1]=8;aA++;aw[8]++}G(ai,J+1,aw);for(aA=0;aA<w;aA++){af[aA*2+1]=5;af[aA*2]=m(aA,5)}ah=new ak(ai,E,L+1,J,M);ae=new ak(af,D,0,w,M);ad=new ak(new Array(0),C,0,o,N)}function I(aw){var av;for(av=0;av<J;av++){aw.dyn_ltree[av*2]=0}for(av=0;av<w;av++){aw.dyn_dtree[av*2]=0}for(av=0;av<o;av++){aw.bl_tree[av*2]=0}aw.dyn_ltree[A*2]=1;aw.opt_len=aw.static_len=0;aw.last_lit=aw.matches=0}function n(av){if(av.bi_valid>8){S(av,av.bi_buf)}else{if(av.bi_valid>0){av.pending_buf[av.pending++]=av.bi_buf}}av.bi_buf=0;av.bi_valid=0}function u(ay,av,ax,aw){n(ay);if(aw){S(ay,ax);S(ay,~ax)}ao.arraySet(ay.pending_buf,ay.window,av,ax,ay.pending);ay.pending+=ax}function ac(aA,az,ay,ax){var aw=az*2;var av=ay*2;return(aA[aw]<aA[av]||(aA[aw]===aA[av]&&ax[az]<=ax[ay]))}function R(ax,ay,aw){var az=ax.heap[aw];var av=aw<<1;while(av<=ax.heap_len){if(av<ax.heap_len&&ac(ay,ax.heap[av+1],ax.heap[av],ax.depth)){av++}if(ac(ay,az,ax.heap[av],ax.depth)){break}ax.heap[aw]=ax.heap[av];aw=av;av<<=1}ax.heap[aw]=az}function t(aC,aA,ax){var aw;var az;var aB=0;var av;var ay;if(aC.last_lit!==0){do{aw=(aC.pending_buf[aC.d_buf+aB*2]<<8)|(aC.pending_buf[aC.d_buf+aB*2+1]);az=aC.pending_buf[aC.l_buf+aB];aB++;if(aw===0){aa(aC,az,aA)}else{av=d[az];aa(aC,av+L+1,aA);ay=E[av];if(ay!==0){az-=k[av];Z(aC,az,ay)}aw--;av=v(aw);aa(aC,av,ax);ay=D[av];if(ay!==0){aw-=j[av];Z(aC,aw,ay)}}}while(aB<aC.last_lit)}aa(aC,A,aA)}function s(aC,av){var aE=av.dyn_tree;var aD=av.stat_desc.static_tree;var ax=av.stat_desc.has_stree;var aw=av.stat_desc.elems;var aA,ay;var az=-1;var aB;aC.heap_len=0;aC.heap_max=H;for(aA=0;aA<aw;aA++){if(aE[aA*2]!==0){aC.heap[++aC.heap_len]=az=aA;aC.depth[aA]=0}else{aE[aA*2+1]=0}}while(aC.heap_len<2){aB=aC.heap[++aC.heap_len]=(az<2?++az:0);aE[aB*2]=1;aC.depth[aB]=0;aC.opt_len--;if(ax){aC.static_len-=aD[aB*2+1]}}av.max_code=az;for(aA=(aC.heap_len>>1);aA>=1;aA--){R(aC,aE,aA)}aB=aw;do{aA=aC.heap[1];aC.heap[1]=aC.heap[aC.heap_len--];R(aC,aE,1);ay=aC.heap[1];aC.heap[--aC.heap_max]=aA;aC.heap[--aC.heap_max]=ay;aE[aB*2]=aE[aA*2]+aE[ay*2];aC.depth[aB]=(aC.depth[aA]>=aC.depth[ay]?aC.depth[aA]:aC.depth[ay])+1;aE[aA*2+1]=aE[ay*2+1]=aB;aC.heap[1]=aB++;R(aC,aE,1)}while(aC.heap_len>=2);aC.heap[--aC.heap_max]=aC.heap[1];F(aC,av);G(aE,az,aC.bl_count)}function X(aD,aE,ax){var aA;var aC=-1;var aw;var aB=aE[1];var av=0;var ay=7;var az=4;if(aB===0){ay=138;az=3}aE[(ax+1)*2+1]=65535;for(aA=0;aA<=ax;aA++){aw=aB;aB=aE[(aA+1)*2+1];if(++av<ay&&aw===aB){continue}else{if(av<az){aD.bl_tree[aw*2]+=av}else{if(aw!==0){if(aw!==aC){aD.bl_tree[aw*2]++}aD.bl_tree[T*2]++}else{if(av<=10){aD.bl_tree[V*2]++}else{aD.bl_tree[U*2]++}}}}av=0;aC=aw;if(aB===0){ay=138;az=3}else{if(aw===aB){ay=6;az=3}else{ay=7;az=4}}}}function ab(aD,aE,ax){var aA;var aC=-1;var aw;var aB=aE[1];var av=0;var ay=7;var az=4;if(aB===0){ay=138;az=3}for(aA=0;aA<=ax;aA++){aw=aB;aB=aE[(aA+1)*2+1];if(++av<ay&&aw===aB){continue}else{if(av<az){do{aa(aD,aw,aD.bl_tree)}while(--av!==0)}else{if(aw!==0){if(aw!==aC){aa(aD,aw,aD.bl_tree);av--}aa(aD,T,aD.bl_tree);Z(aD,av-3,2)}else{if(av<=10){aa(aD,V,aD.bl_tree);Z(aD,av-3,3)}else{aa(aD,U,aD.bl_tree);Z(aD,av-11,7)}}}}av=0;aC=aw;if(aB===0){ay=138;az=3}else{if(aw===aB){ay=6;az=3}else{ay=7;az=4}}}}function r(aw){var av;X(aw,aw.dyn_ltree,aw.l_desc.max_code);X(aw,aw.dyn_dtree,aw.d_desc.max_code);s(aw,aw.bl_desc);for(av=o-1;av>=3;av--){if(aw.bl_tree[p[av]*2+1]!==0){break}}aw.opt_len+=3*(av+1)+5+5+4;return av}function Y(az,ax,aw,av){var ay;Z(az,ax-257,5);Z(az,aw-1,5);Z(az,av-4,4);for(ay=0;ay<av;ay++){Z(az,az.bl_tree[p[ay]*2+1],3)}ab(az,az.dyn_ltree,ax-1);ab(az,az.dyn_dtree,aw-1)}function x(ax){var av=4093624447;var aw;for(aw=0;aw<=31;aw++,av>>>=1){if((av&1)&&(ax.dyn_ltree[aw*2]!==0)){return ap}}if(ax.dyn_ltree[9*2]!==0||ax.dyn_ltree[10*2]!==0||ax.dyn_ltree[13*2]!==0){return ar}for(aw=32;aw<L;aw++){if(ax.dyn_ltree[aw*2]!==0){return ar}}return ap}var ag=!1;function g(av){if(!ag){am();ag=!0}av.l_desc=new an(av.dyn_ltree,ah);av.d_desc=new an(av.dyn_dtree,ae);av.bl_desc=new an(av.bl_tree,ad);av.bi_buf=0;av.bi_valid=0;I(av)}function h(ax,av,ay,aw){Z(ax,(al<<1)+(aw?1:0),3);u(ax,av,ay,!0)}function e(av){Z(av,aj<<1,3);aa(av,A,ai);l(av)}function f(az,av,aB,aw){var ay,aA;var ax=0;if(az.level>0){if(az.strm.data_type===at){az.strm.data_type=x(az)}s(az,az.l_desc);s(az,az.d_desc);ax=r(az);ay=(az.opt_len+3+7)>>>3;aA=(az.static_len+3+7)>>>3;if(aA<=ay){ay=aA}}else{ay=aA=aB+5}if((aB+4<=ay)&&(av!==-1)){h(az,av,aB,aw)}else{if(az.strategy===aq||aA===ay){Z(az,(aj<<1)+(aw?1:0),3);t(az,ai,af)}else{Z(az,(z<<1)+(aw?1:0),3);Y(az,az.l_desc.max_code+1,az.d_desc.max_code+1,ax+1);t(az,az.dyn_ltree,az.dyn_dtree)}}I(az);if(aw){n(az)}}function i(ax,av,aw){ax.pending_buf[ax.d_buf+ax.last_lit*2]=(av>>>8)&255;ax.pending_buf[ax.d_buf+ax.last_lit*2+1]=av&255;ax.pending_buf[ax.l_buf+ax.last_lit]=aw&255;ax.last_lit++;if(av===0){ax.dyn_ltree[aw*2]++}else{ax.matches++;av--;ax.dyn_ltree[(d[aw]+L+1)*2]++;ax.dyn_dtree[v(av)*2]++}return(ax.last_lit===ax.lit_bufsize-1)}B._tr_init=g;B._tr_stored_block=h;B._tr_flush_block=f;B._tr_tally=i;B._tr_align=e},{"../utils/common":1}],8:[function(d,c){function e(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}c.exports=e},{}],"/lib/deflate.js":[function(h,f,e){var s=h("./zlib/deflate");var j=h("./utils/common");var g=h("./zlib/messages");var t=h("./zlib/zstream");var i=Object.prototype.toString;var o=0;var n=4;var p=0;var q=1;var r=2;var k=-1;var l=0;var m=8;function d(w){if(!(this instanceof d)){return new d(w)}this.options=j.assign({level:k,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},w||{});var v=this.options;if(v.raw&&(v.windowBits>0)){v.windowBits=-v.windowBits}else{if(v.gzip&&(v.windowBits>0)&&(v.windowBits<16)){v.windowBits+=16}}this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new t();this.strm.avail_out=0;var x=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(x!==p){throw new Error(g[x])}if(v.header){s.deflateSetHeader(this.strm,v.header)}if(v.dictionary){var u;if(typeof v.dictionary==="string"){u=strings.string2buf(v.dictionary)}else{if(i.call(v.dictionary)==="[object ArrayBuffer]"){u=new Uint8Array(v.dictionary)}else{u=v.dictionary}}x=s.deflateSetDictionary(this.strm,u);if(x!==p){throw new Error(g[x])}}}d.prototype.push=function(w,x){var z=this.strm;var v=this.options.chunkSize;var y,u;if(this.ended){return !1}u=(x===~~x)?x:((x===!0)?n:o);z.input=w;z.next_in=0;z.avail_in=z.input.length;do{if(z.avail_out===0){z.output=new j.Buf8(v);z.next_out=0;z.avail_out=v}y=s.deflate(z,u);if(y!==q&&y!==p){this.onEnd(y);this.ended=!0;return !1}if(z.avail_out===0||(z.avail_in===0&&(u===n||u===r))){this.onData(j.shrinkBuf(z.output,z.next_out))}}while((z.avail_in>0||z.avail_out===0)&&y!==q);if(u===n){y=s.deflateEnd(this.strm);this.onEnd(y);this.ended=!0;return y===p}if(u===r){this.onEnd(p);z.avail_out=0;return !0}return !0};d.prototype.onData=function(u){this.chunks.push(u)};d.prototype.onEnd=function(u){if(u===p){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=j.flattenChunks(this.chunks)}}this.chunks=[];this.err=u;this.msg=this.strm.msg};function c(v,w){var u=new d(w);u.push(v,!0);if(u.err){throw u.msg}return u.result}e.deflate=c},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")});